# 開示資料 比較・分析ツール 仕様書

## 1. コンセプト

企業の各種開示資料（有価証券報告書、統合報告書、決算短信、計算書類など）を複数アップロードし、AIを活用して記載内容の「**整合性検証**」と「**差分分析**」を自動で行うツール。

これにより、以下を実現する：
- 開示情報の品質向上
- 作成工数の削減
- 競合他社分析の高度化

---

## 2. 主な機能

### 機能1：書類アップロードと事前処理機能

複数の開示資料をインプットとして受け付ける機能。

#### マルチファイルアップロード
- 比較したい資料を**複数（2つ以上）同時にアップロード**できるUI
- **ドラッグ&ドロップ**対応
- **対応ファイル形式**：
  - PDF（テキストベース、画像ベース両対応）

#### 書類種の自動判定
- アップロードされたファイル名、冒頭20ページ程度を画像でLLMに渡し、書類の種類を自動判定
  - 判定例：「有価証券報告書」「統合報告書」「決算短信」など
- **手動修正機能**：判定結果が誤っていた場合、ユーザーが手動で修正できるインターフェースを提供

---

### 機能2：内容の構造化・分析機能

アップロードされた非構造データ（PDF）を、比較可能な構造化データに変換する**本ツールのコア機能**。

#### テンプレートに基づく項目抽出
- **事前テンプレート保持**：
  - 書類の種類ごとに標準的な目次構成や記載項目をテンプレートとして保持
  - 例：有価証券報告書の場合
    - 「事業の状況」
    - 「事業等のリスク」
    - 「経営者による財政状態、経営成績及びキャッシュ・フローの状況の分析（MD&A）」
    - など

- **ページマッピング**：
  - LLMに各ページの画像を10枚程度ずつ渡し、各項目が本文の何ページから何ページに記載されているかをマッピング
  - 直前のマッピング結果も渡して文脈を損なわずに全ページに対してマッピングを行う

---

### 機能3：比較・照合エンジン

マッピング情報をもとにユーザーの目的に応じた比較・分析を実行する機能。

#### 比較モードの自動選択

##### 整合性チェックモード
- **起動条件**：同じ会社の異なる種類の資料がアップされた場合
- **例**：有価証券報告書 vs 統合報告書

##### 差分分析モード
- **起動条件**：以下のいずれかの場合
  - 異なる会社の同じ種類の資料（例：A社有報 vs B社有報）
  - 同じ会社の過年度資料（例：2024年有報 vs 2025年有報）

##### 多資料比較
- **起動条件**：3つ以上の資料がアップされた場合
- **処理内容**：全資料間での整合性や共通点・相違点を網羅的にチェック

#### 対応項目のマッピング
- 比較対象の資料間で、対応する項目を自動で紐付ける
- **例**：A社有報の「事業等のリスク」とB社有報の「事業等のリスク」

#### 詳細な比較ロジック

##### 数値データの比較
- 財務諸表などの表中の数値を比較し、不一致箇所を抽出
- 一定の閾値を許容する設定も可能
  - 単位の違い
  - 丸め誤差

##### テキストデータの比較

###### 完全一致/部分一致
- 文章や単語レベルでの単純な差異を検出

###### 意味の類似度分析
- 表現は異なるが、意味的に同じ内容を記述している箇所を判定
- **例**：
  - 「サイバーセキュリティへの脅威」
  - 「不正アクセスによる情報漏洩リスク」
  - → 類似していると判定

###### トピックの比較
- 各項目で語られている主要なトピックを抽出
  - 例：「脱炭素」「DX」「人材育成」など
- トピックの有無や記述量の違いを可視化

###### ポジティブ/ネガティブ分析
- リスク記述などのトーンが、他社と比較してどの程度強い表現かを分析

---

### 機能4：結果表示・レポート機能

分析結果をユーザーが直感的に理解できる形式で提示する機能。

#### サマリーダッシュボード
- 分析の全体像を最初に表示
- **要約例**：
  - 「数値の不一致がX件」
  - 「意味的に重要な差異がY件」

#### サイド・バイ・サイド（左右対照）ビュー
- 2つのドキュメントを画面の左右に並べて表示
- **ハイライト表示**：
  - 差異がある箇所や整合性が取れていない箇所をハイライト
  - クリックすると該当ページにジャンプ
- **視覚的な紐付け**：
  - 対応する項目同士が線で結ばれるなど、視覚的な分かりやすさを追求

#### 差分リスト
- 検出された差分や不整合な点を一覧でリスト表示
- **ドリルダウン機能**：
  - リストから、原文の該当箇所にドリルダウン可能

#### レポート出力
- 分析結果をエクスポート可能
- **レポート内容**：
  - 指摘事項
  - 原文の該当箇所のスナップショット
  - ページ番号

---

## 3. UI/UX（ユーザーインターフェース/エクスペリエンス）

### 直感的な操作
- 専門知識がない経理やIR担当者でも簡単に使える、シンプルでクリーンなデザイン

### インタラクティブな分析
- 結果画面で気になる箇所をクリックすると、関連情報がポップアップ
- ユーザーが深掘り分析しやすい設計

### カスタマイズ性
- 比較の際に重視する項目を設定可能
  - **例**：「リスク情報」は特に厳しくチェックする
- 無視する軽微な差異をユーザーが設定できる機能

---

## 4. 技術要件

### フロントエンド
- レスポンシブデザイン対応
- ドラッグ&ドロップによるファイルアップロード
- インタラクティブなダッシュボード

### バックエンド
- PDF解析エンジン（テキストベース、画像ベース両対応）
- LLM統合（gpt-5）
  - 書類種別の自動判定
  - ページマッピング
  - テキスト比較・分析

### データ処理
- 非構造データの構造化
- テキスト類似度分析
- 数値データの比較ロジック

---

## 5. 期待される効果

### 開示情報の品質向上
- 複数資料間の整合性を自動チェックし、不整合を早期発見
- ヒューマンエラーの削減

### 作成工数の削減
- 手動での照合作業を大幅に削減
- レポート作成の自動化

### 競合他社分析の高度化
- 複数企業の開示資料を効率的に比較
- トピック分析やトーン分析による深い洞察の獲得

---

